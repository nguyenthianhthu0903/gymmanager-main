<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="UTF-8">
  <title>XIN CHÀO</title>
  <link rel="shortcut icon" href="https://cali.vn/themes/cfyc/assets/static/favicon/favicon.svg">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/css/index.css">
  <link rel="stylesheet" href="/css/listhotel.css">
  <link rel="stylesheet" href="/css/custome-tab.css">

  <!-- icon -->
  <!-- <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script> -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <!-- bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>

  <!-- SLICK SLIDER -->
  <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
  <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"/>
  <script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

  <!-- RESPONSIVE -->
  <link rel="stylesheet" href="/css/esponsive.css">

  <!-- JQUERY-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <!-- FONT HELGA -->
  <style>
    .imageThumb {
      max-height: 75px;
      border: 2px solid;
      padding: 1px;
      cursor: pointer;
    }
    .pip {
      display: inline-block;
      margin: 10px 10px 0 0;
    }
    .remove {
      display: block;
      background: #444;
      border: 1px solid black;
      color: white;
      text-align: center;
      cursor: pointer;
    }
    .remove:hover {
      background: white;
      color: black;
    }
  </style>
</head>
<body>
<div>
  <div class="row log-page">
    <!-- ẢNH -->
    <div class="col-md-8 log-page-img p-0">
      <div></div>
    </div>
    <!-- THÔNG TIN -->
    <div class="col-md-4 log-page-info p-0">
      <div>
        <div class="log-logo">
          <div class="log-logo-item">
            <img src="https://citigym.com.vn/themes/citigym/images/logo.png" alt="">
          </div>
        </div>
        <div class="tab-log">
          <div>
            <nav>
              <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
                <a class="nav-item nav-link active" id="nav-login-tab" data-toggle="tab" href="#nav-login" role="tab" aria-controls="nav-login" aria-selected="true" style="font-size: 16px; ">Đăng nhập</a>
                <a class="nav-item nav-link" id="nav-register-tab" data-toggle="tab" href="#nav-register" role="tab" aria-controls="nav-register" aria-selected="false" style="font-size: 16px; ">Đăng ký</a>
              </div>
            </nav>
            <div class="tab-content" id="nav-tabContent">
              <!--ĐĂNG NHẬP-->
              <div class="tab-pane fade show active" id="nav-login" role="tabpanel" aria-labelledby="nav-login-tab">
                <div class="tab-pane fade show active" id="nav-login" role="tabpanel" aria-labelledby="nav-login-tab">
                  <form method="POST" enctype="multipart/form-data" action="/login" th:object="${khachhang}">
                    <div class="login-input">
                      <div class="login-input-item">
                        <input type="email" placeholder="Email" class="form-control" id="emailkh" required name="emailkh" th:field="*{emailkh}">
                      </div>
                      <div class="login-input-item">
                        <input type="password" placeholder="Mật khẩu / Password" class="form-control"  required name="passwordLogin" th:field="*{password}">
                      </div>
                    </div>
                    <div class="remember_forgot" style="margin-bottom: 15px">
                      <p style="font-size: 16px;margin-bottom: 0px"><input type="checkbox" name="" id="" >Nhớ mật khẩu</p>
                      <button data-toggle="modal" data-target="#exampleModal" style="font-size: 16px;background-color: white !important;color:#a50000;">Quên mật khẩu</button>
                    </div>
                    <div class="btn">
                      <button type="submit" style="background-color: #a50000">ĐĂNG NHẬP</button>
                    </div>
                    <b style="font-size: 16px;color: red" th:text="${errlogin}"></b>
                  </form>
                </div>
              </div>
<!--              ĐĂNG KÝ-->
              <div class="tab-pane fade" id="nav-register" role="tabpanel" aria-labelledby="nav-register-tab">
                <div class="tab-pane fade show active" id="nav-login" role="tabpanel" aria-labelledby="nav-login-tab">
                  <div class="login-input">
                    <form id="register-form" method="POST" enctype="multipart/form-data" th:object="${khachhang}" onsubmit="return true">
                      <div class="login-input-item">
                        <input id="email" name="email" th:field="*{emailkh}" type="email" placeholder="Email" class="form-control" required>
                      </div>
                      <div class="login-input-item">
                        <input id="hoten" name="hoten" th:field="*{tenkh}" type="text" placeholder="Họ và tên" class="form-control" pattern="[a-z\sA-ZÀÁÂÃÈÉÊÌÍÒÓÔÕÙÚĂĐĨŨƠàáâãèéêìíòóôõùúăđĩũơƯĂẠẢẤẦẨẪẬẮẰẲẴẶẸẺẼỀỀỂưăạảấầẩẫậắằẳẵặẹẻẽềềểỄỆỈỊỌỎỐỒỔỖỘỚỜỞỠỢỤỦỨỪễệỉịọỏốồổỗộớờởỡợụủứừỬỮỰỲỴÝỶỸửữựỳỵỷỹ]{1,255}" required>
                      </div>
                      <div class="form-check">
                        <div style="display: inline-flex">
                          <div>
                            <input class="form-check-input" type="radio" name="gender" id="gender1" value="Female">
                            <label class="form-check-label" for="gender1" style="font-size: 16px">
                              Nữ
                            </label>
                          </div>
                          <div>
                            <input class="form-check-input" type="radio" name="gender" id="gender2" value="Male">
                            <label class="form-check-label" for="gender1" style="font-size: 16px">
                              Nam
                            </label>
                          </div>
                        </div>
                      </div>

                      <div class="login-input-item">
                        <input id="sdt" name="sdt" type="text" th:field="*{sdtkh}" placeholder="Số điện thoại" class="form-control" required pattern="[0]{1}[0-9]{3}[0-9]{3}[0-9]{3}">
                      </div>
                      <div class="login-input-item">
                        <input name="password" id="passworddk" th:field="*{password}" type="password" placeholder="Mật khẩu" class="form-control" required>
                      </div>
                      <div class="login-input-item">
                        <input name="confirm_password" id="confirm_password" type="password" placeholder="Nhập lại mật khẩu" class="form-control" required>
                      </div>

                      <div class="btn">
                        <button style="background-color: #a50000" type="submit" data-toggle="modal" data-target="#exampleModalCenter" onclick="return regist()">ĐĂNG KÝ</button>
                      </div>
                      <b style="font-size: 16px;color: red" th:text="${errRegist}"></b>

                      <b id="message" style="font-size: 16px"></b>
                    </form>

                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!--MODAL QUÊN MẬT KHẨU-->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel" style="font-size: 20px">QUÊN MẬT KHẨU</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true" style="font-size: 16px">&times;</span>
        </button>
      </div>
      <div class="modal-body" method="post">
        <form class="border rounded w-100 mb-5 mx-auto px-3 pt-3 bg-light" >
          <div class="form-group">
            <label style="font-size: 16px" for="email">Email</label>
            <input style="font-size: 16px" id="emailforgot" type="email" class="form-control" placeholder="Email" name="emailkh" required>
          </div>
          <div class="form-group">
            <button class="btn btn-success px-5" style="font-size: 20px" id="sendemail">SEND</button>
          </div>
          <div class="form-group">
            <p style="color: red"></p>
          </div>

        </form>
      </div>
    </div>
  </div>
</div>












<!--MODAL AFTER REGIST SUCCESS -->
<script>
  $('#passworddk, #confirm_password').on('keyup', function () {
    if ($('#passworddk').val() == $('#confirm_password').val()) {
      $('#message').html('Hợp lệ').css('color', 'green');
    } else
      $('#message').html('Không hợp lệ').css('color', 'red');
  });

  var radioButtonGroupGender = document.getElementsByName("gender");

  function regist()
  {
    console.log($("#hoten").val())
    if ($('#passworddk').val() != $('#confirm_password').val() || $("#file").val()=='' || $('#passworddk').val().length<6 || /^[a-z\sA-ZÀÁÂÃÈÉÊÌÍÒÓÔÕÙÚĂĐĨŨƠàáâãèéêìíòóôõùúăđĩũơƯĂẠẢẤẦẨẪẬẮẰẲẴẶẸẺẼỀỀỂưăạảấầẩẫậắằẳẵặẹẻẽềềểỄỆỈỊỌỎỐỒỔỖỘỚỜỞỠỢỤỦỨỪễệỉịọỏốồổỗộớờởỡợụủứừỬỮỰỲỴÝỶỸửữựỳỵỷỹ]+$/.test($('#hoten').val())==false)
    {
      return false;
    }

    $(document).ready(function()
    {
      $.ajax({
        type: 'POST',
        url: '/log',
        data: {
          emailkh:$('#email').val(),
          tenkh:$('#hoten').val(),
          sdtkh:$('#sdt').val(),
          passwordkh:$('#password').val(),
          genderkh:Array.from(radioButtonGroupGender).find(
                  (radio) => radio.checked
          ).value,
        },
        success: function()
        {
          return true;
        },
        error: function (jqXHR) {
          return false;
        }
      });
    });
  }

  $('#sendemail').click(function(){
    $.ajax({
      type: "post",
      url: "http://localhost:8080/employee/quanly/forgot",
      data: {emailkh:$('#emailforgot').val() },
      headers: {
        'Content-Type': 'application/json',
        'Accept':'application/json'
      },
      success: function (response)
      {
        alert("Vui lòng kiểm tra email")
      },
      error:function ()
      {
        alert("Email chưa được đăng ký")
      }
    });
  })
</script>
</body>
</html>